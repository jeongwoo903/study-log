# [Network] 소켓 이해하기

## 소켓(Socket)
| ![01.png](assets/%5BNetwork%5D%20%EC%86%8C%EC%BC%93%20%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/01.png) |
|:--------------------------------------------------------------------------------------------------:|
|                                                 소켓                                                 |

소켓(Socket)은 사전적으로 구멍, 연결, 콘센트 등의 의미를 가진다.  
전기를 필요로 하는 장치들이 전기를 공급받을 수 있도록, 전기 공급 인프라 환경에 연결할 수 있게 만들어진 연결부가 소켓이다.    

네트워크 프로그래밍에서의 소켓(Socket)에 대한 의미도, 사전적 의미를 크게 벗어나지 않는다.  
프로그램들이 네트워크에서 데이터를 송수신 할 수 있도록, 네트워크 환경에 연결할 수 있게 만들어진 연결부가 바로 **네트워크 소켓**이다.  

전기 소켓이 전기를 공급받기 위해 정해진 규격(110V, 220V)에 맞게 만들어져야 하듯, 네트워크에 연결하기 위한 소켓 또한 정해진 규약인 프로토콜에 맞게 만들어져야 합니다.  
TCP 상에서 동작하는 소켓을 주로 사용하는데, 이를 TCP 소켓 또는 TCP/IP 소켓 이라고 부른다.

## TCP/IP 소켓 프로그래밍
소켓으로 네트워크 통신 기능을 구현하기 위해서는 소켓을 만드는 것과 만들어진 소켓을 통해 데이터를 주고 받는 절차에 대한 이해가 필요하고, 운영체제 및 프로그래밍 언어에 종속적으로 제공되는 소캣 API 사용법을 숙지해야 한다. 

우선 소켓(Client)과 서버 소켓(Server Socket)의 역할에 대한 내용을 살펴보자.  
데이터를 주고받기 위해서는 먼저 소켓의 연결 과정이 선행되어야 하고, 그 과정에서의 연결 요청과 수신이 각각 클라이언트 소켓과 서버 소켓의 역할이기 때문이다.

## 클라이언트 소켓(Client Socket)과 서버 소켓(Server Socket)
> 두 network edge 끼리 통신을 하려면, app layer에서만 이를 할수있다.  
> 하지만 현재는 소켓이 없기 때문에 app layer에서 요청이 일어 나더라도 tcp layer로 메세지를 보낼 수 없다.  
> 그래서 C로 따지면 socket()으로 먼저 소켓을 만든 후, connect()로 요청을 한다.

두 개의 시스템(또는 프로세스)가 **소켓을 통해** 네트워크 연결(Connection)을 하기 위해서는, 최초 어느 한 곳에서 그 대상이 되는 곳으로 연결을 요청해야 합니다.  
IP 주소와 포트 번호로 식별되는 대상에게, 자신이 데이터 송수신을 위한 네트워크 연결을 수립할 의사가 있음을 알려야 한다.  

| ![02.png](assets/%5BNetwork%5D%20%EC%86%8C%EC%BC%93%20%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/02.png) |
|:--------------------------------------------------------------------------------------------------:|

그런데 최초 한 곳에서 무작정 연결을 시도 한다고 해서 통신을 할 수 있는 것이 아니다.  
한 곳에서 연결 요청을 보낸다고 하더라도 그 대상 시스템이 그 요청을 받아들일 준비가 안되었다면, 해당 요청은 무시되고 연결은 만들어 지지 않는다.  

| ![03.png](assets/%5BNetwork%5D%20%EC%86%8C%EC%BC%93%20%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/03.png) |
|:--------------------------------------------------------------------------------------------------:|

> 서버 소켓을 만든다면 어떤 포트로 데이터를 받아들일지 정해야 한다.

그러므로 요청을 받아들일 곳에서는 어떤 연결 요청(일반적으로는 포트 번로 식별)을 받아들일 것인지를 미리 시스템에 등록하여, 요청이 수신되었을 때 해당 요청을 처리 할 수 있도록 준비해야한다.  

이렇듯 두 개의 시스템(또는 프로세스)이 소켓을 통해 데이터 통신을 위한 연결(Connection)을 만들기 위해서는, 연결 요청을 보내는지 또는 요청을 받아들이는지에 따라 소켓의 역할이 나뉜다.  
이때, 전자에 사용되는 소켓을 클라이언트 소켓(Client Socket), 후자에 사용되는 소켓을 서버 소켓(Server Socket)이라고 한다.

| ![04.png](assets/%5BNetwork%5D%20%EC%86%8C%EC%BC%93%20%EC%9D%B4%ED%95%B4%ED%95%98%EA%B8%B0/04.png) |
|:--------------------------------------------------------------------------------------------------:|

## 출처
- https://recipes4dev.tistory.com/153

