# [CS] 웹 인증 (Cookie, Session, Token(JWT))

## 선 개념
- [[HTTP] http의 특징](https://github.com/jeongwoo903/study-log/blob/main/2024-08/%5BHTTP%5D%20http%EC%9D%98%20%ED%8A%B9%EC%A7%95.md)

## 초기 웹의 문제점
초기 웹에서는 http 방식을 사용했기 때문에, 사용자의 요청에 대한 상태를 기억할 방법이 없었다. 
왜냐면 http는 서버가 각 요청을 독립적으로 처리하고 상태를 저장하지 않는 stateless적인 특징을 띄었기 때문이다.  

이로 인해서 웹에서 사용자의 상태를 관리하는데 어려움이 있었다.
예를 들면, 사용자가 쇼핑몰 사이트에 물품을 추가했는데, 상태가 유지가 안되다 보니 다음 페이지로 넘어갔을때 추가된 물품이 없어진다고 생각하면 된다.  

## 쿠키(Cookie)의 등장
> 📌쿠키(Cookie): Client에서 작은 데이터 파일을 저장해, 사용자의 상태를 유지하고 관리하는 기록파일이다.  

그래서 이러한 불편함을 해소하기 위해 Cookie라는 개념이 등장하였다.

쿠키에는 key-value의 형태로 정보가 담기게 된다.
```html
HTTP/1.1 200 OK
Set-Cookie: sessionId=qwer1234; HttpOnly; Path=/; Secure; SameSite=Strict
Content-Type: text/html

<!DOCTYPE html>
<html>
    <head>
        <title>Home</title>
    </head>
    <body>
        <h1>Welcome to Home Page</h1>
    </body>
</html>

```

쿠키가 나오고 나서 사용자의 상태를 Client에 저장해 요청을 보낼 수 있게 되어서 상태를 유지할 수 있게 되었다.
하지만 상태를 유지할 수 있다는 장점이 생겼지만, 한계점 또한 존재했다.

인증이 필요한 웹의 경우 사용자의 상태를 확인하기 위해 매번 인증을 해야했는데, 그러다 보니 서버에 부하가 걸리게 됨.

쿠키는 주로 사용자 정보, 사용자 설정, 인증 정보등 다양한 형태의 정보들을 저장할 수 있다.  
그러다 보니 **민감한 정보들을 담기는 문제**들이 있기도 하였다.
하지만 쿠키는 **일반적으로 최대 4KB 정도의 데이터를 저장**할 수 있기 때문에 저장할 정보를 잘 생각해야 한다.
(쿠키를 3개로 나누어 12kb의 정보를 저장하기도 한다고 한다..)

유저 정보를 쿠키로 관리하다 보니 보안에 취약할 수 밖에 없었고, 한 번 쿠키가 털리게 되면 쿠키를 조작되어 사용될 경우도 있었다.

---
이어서..


